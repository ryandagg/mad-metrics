var timeCount=0,countToSignUp,signedUp=!1,intervalID,scrollRangeList=[],windowHeight=$(window).height(),percentWindowScrolled=function(){for(var t=$("body").height(),n=0,o=0;o<scrollRangeList.length;o++)scrollRangeList[o][1]>n&&(console.log("iteration: ",scrollRangeList[o][1]," | ","lowest: ",n),n=scrollRangeList[o][1]);return console.log("lowest: ",n),String(Math.round(n/t*100))+"%"},distanceScrolled=function(){for(var t=0,n=1;n<scrollRangeList.length;n++)t+=Math.abs(scrollRangeList[n][0]-scrollRangeList[n-1][0]);return t},timer=function(t){"start"===t?intervalID=setInterval(function(){timeCount++},1e3):clearInterval(intervalID)};timer("start"),$(document).on("ready",function(){$(document).on("scroll",function(){scrollRangeList.push([$("body").scrollTop(),$("body").scrollTop()+windowHeight])}),$(".metricsBtn").on("click",function(){timer("stop"),signedUp||(countToSignUp=timeCount,signedUp=!0),$(".popup").show(),$(".timeTotalDisplay").text(timeCount+" seconds"),$(".signTimeDisplay").text(countToSignUp+" seconds"),$(".percentViewedDisplay").text(percentWindowScrolled()),$(".totalDistanceDisplay").text(distanceScrolled()+"px")}),$(".closeButton").click(function(){$(".popup").hide(),timer("start")})});